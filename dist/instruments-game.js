(()=>{var l=class{constructor(){this.instruments=[{name:"Violin",family:"String",visual:"images/instruments/violin.jpg",description:"A small string instrument played with a bow"},{name:"Cello",family:"String",visual:"images/instruments/cello.jpg",description:"A large string instrument played with a bow, held between the knees"},{name:"Trumpet",family:"Wind",visual:"images/instruments/trumpet.jpg",description:"A brass wind instrument with valves"},{name:"Horn",family:"Wind",visual:"images/instruments/horn.jpg",description:"A brass wind instrument with a curved shape"},{name:"Trombone",family:"Wind",visual:"images/instruments/trombone.jpg",description:"A brass wind instrument with a sliding tube"},{name:"Flute",family:"Wind",visual:"images/instruments/flute.jpg",description:"A woodwind instrument played by blowing across a hole"},{name:"Oboe",family:"Wind",visual:"images/instruments/oboe.jpg",description:"A woodwind instrument with a double reed"},{name:"Clarinet",family:"Wind",visual:"images/instruments/clarinet.jpg",description:"A woodwind instrument with a single reed"},{name:"Bassoon",family:"Wind",visual:"images/instruments/bassoon.jpg",description:"A large woodwind instrument with a double reed"},{name:"Bass Drum",family:"Percussion",visual:"images/instruments/bass_drum.jpg",description:"A large drum that produces low-pitched sounds"},{name:"Timpani",family:"Percussion",visual:"images/instruments/timpani.jpg",description:"Tunable drums also called kettledrums"}],this.currentInstrument=null,this.currentQuestion=null,this.selectedAnswer=null,this.score=0,this.level=1,this.streak=0,this.gameMode="identify",this.initializeElements(),this.attachEventListeners(),this.updateDisplay()}initializeElements(){this.scoreElement=document.getElementById("score"),this.levelElement=document.getElementById("level"),this.streakElement=document.getElementById("streak"),this.instrumentDisplay=document.getElementById("instrumentDisplay"),this.instrumentVisual=document.getElementById("instrumentVisual"),this.instrumentName=document.getElementById("instrumentName"),this.questionText=document.getElementById("questionText"),this.resultDisplay=document.getElementById("resultDisplay"),this.optionsContainer=document.getElementById("optionsContainer"),this.gameModeSelect=document.getElementById("gameMode"),this.newQuestionBtn=document.getElementById("newQuestionBtn"),this.showAnswerBtn=document.getElementById("showAnswerBtn")}attachEventListeners(){this.newQuestionBtn.addEventListener("click",()=>this.generateNewQuestion()),this.showAnswerBtn.addEventListener("click",()=>this.showAnswer()),this.gameModeSelect.addEventListener("change",e=>{this.gameMode=e.target.value})}generateNewQuestion(){this.selectedAnswer=null,this.resultDisplay.style.display="none",this.clearOptions(),this.currentInstrument=this.instruments[Math.floor(Math.random()*this.instruments.length)],this.gameMode==="mixed"?this.currentQuestion=Math.random()<.5?"identify":"family":this.currentQuestion=this.gameMode,this.displayInstrument(),this.generateOptions(),this.showAnswerBtn.disabled=!1}displayInstrument(){this.instrumentVisual.src=this.currentInstrument.visual,this.instrumentVisual.alt=this.currentInstrument.name,this.currentQuestion==="identify"?(this.instrumentName.textContent="?",this.questionText.textContent="What instrument is this?"):this.currentQuestion==="family"&&(this.instrumentName.textContent=this.currentInstrument.name,this.questionText.textContent="What family does this instrument belong to?")}generateOptions(){this.optionsContainer.innerHTML="";let e=[],t="";if(this.currentQuestion==="identify"){t=this.currentInstrument.name,e=[t];let s=this.instruments.filter(n=>n.name!==t);for(;e.length<4;){let n=s[Math.floor(Math.random()*s.length)];e.includes(n.name)||e.push(n.name)}}else this.currentQuestion==="family"&&(t=this.currentInstrument.family,e=["String","Wind","Percussion"]);e=this.shuffleArray(e),e.forEach(s=>{let n=document.createElement("button");n.className="option-button",n.textContent=s,n.addEventListener("click",()=>this.selectAnswer(s,n,t)),this.optionsContainer.appendChild(n)})}selectAnswer(e,t,s){let n=document.querySelectorAll(".option-button");n.forEach(i=>{i.style.pointerEvents="none"}),this.selectedAnswer=e;let r=e===s;r?t.classList.add("correct"):(t.classList.add("incorrect"),n.forEach(i=>{i.textContent===s&&i.classList.add("correct")})),this.showResult(r,s),r?(this.score+=15+this.level*5,this.streak++,this.streak%5===0&&this.level++):this.streak=0,this.updateDisplay(),setTimeout(()=>{this.clearOptions(),this.showAnswerBtn.disabled=!0},3e3)}showResult(e,t){this.resultDisplay.style.display="flex",this.resultDisplay.className=`result-display ${e?"correct":"incorrect"}`,e?this.resultDisplay.textContent="\u{1F389} Correct! Well done!":this.currentQuestion==="identify"?this.resultDisplay.textContent=`\u274C Incorrect. This is a ${t}.`:this.resultDisplay.textContent=`\u274C Incorrect. The ${this.currentInstrument.name} belongs to the ${t} family.`,setTimeout(()=>{this.resultDisplay.textContent+=` ${this.currentInstrument.description}`},1500)}showAnswer(){this.instrumentName.textContent=this.currentInstrument.name,this.questionText.textContent=`This is a ${this.currentInstrument.name} from the ${this.currentInstrument.family} family.`;let e=document.querySelectorAll(".option-button"),t=this.currentQuestion==="identify"?this.currentInstrument.name:this.currentInstrument.family;e.forEach(s=>{s.textContent===t&&s.classList.add("correct"),s.style.pointerEvents="none"}),this.showAnswerBtn.disabled=!0,this.resultDisplay.style.display="flex",this.resultDisplay.className="result-display",this.resultDisplay.style.background="#e2e3e5",this.resultDisplay.style.color="#383d41",this.resultDisplay.style.border="2px solid #d6d8db",this.resultDisplay.textContent=this.currentInstrument.description}clearOptions(){document.querySelectorAll(".option-button").forEach(t=>{t.style.pointerEvents="auto",t.classList.remove("selected","correct","incorrect")})}shuffleArray(e){let t=[...e];for(let s=t.length-1;s>0;s--){let n=Math.floor(Math.random()*(s+1));[t[s],t[n]]=[t[n],t[s]]}return t}updateDisplay(){this.scoreElement.textContent=this.score,this.levelElement.textContent=this.level,this.streakElement.textContent=this.streak}};document.addEventListener("DOMContentLoaded",()=>{new l});})();
