"use strict";(()=>{(function(){let e={difficulty:3,mode:"2players",currentPlayer:1,currentRoll:null,players:{1:{digits:[],wins:0},2:{digits:[],wins:0}},gameOver:!1},t={difficultySelect:document.getElementById("difficultySelect"),modeSelect:document.getElementById("modeSelect"),settingsPanel:document.getElementById("settingsPanel"),player1Area:document.getElementById("player1Area"),player2Area:document.getElementById("player2Area"),player2Name:document.getElementById("player2Name"),p1Dice:document.getElementById("p1Dice"),p2Dice:document.getElementById("p2Dice"),p1Grid:document.getElementById("p1Grid"),p2Grid:document.getElementById("p2Grid"),p1Final:document.getElementById("p1Final"),p2Final:document.getElementById("p2Final"),p1Score:document.getElementById("p1Score"),p2Score:document.getElementById("p2Score"),statusMsg:document.getElementById("statusMsg"),rollBtn:document.getElementById("rollBtn"),newGameBtn:document.getElementById("newGameBtn"),winnerModal:document.getElementById("winnerModal"),winnerTitle:document.getElementById("winnerTitle"),winnerP1:document.getElementById("winnerP1"),winnerP2:document.getElementById("winnerP2"),playAgainBtn:document.getElementById("playAgainBtn")};function y(){e.difficulty=parseInt(t.difficultySelect.value),e.mode=t.modeSelect.value,t.player2Name.textContent=e.mode==="vsComputer"?"Computer":"Player 2",u()}function p(){let n=["Ones","Tens","Hundreds","Thousands","Ten-Thousands"];t.p1Grid.innerHTML="",t.p2Grid.innerHTML="";for(let l=e.difficulty-1;l>=0;l--){let r=f(l,1),i=f(l,2);t.p1Grid.appendChild(r),t.p2Grid.appendChild(i)}}function f(n,l){let r=["Ones","Tens","Hundreds","Thousands","Ten-Thousands"],i=document.createElement("div");return i.className="place-slot",i.dataset.index=String(n),i.dataset.player=String(l),i.innerHTML=`
      <div class="place-label">${r[n]}</div>
      <div class="place-digit">-</div>
    `,i.addEventListener("click",()=>B(i)),i}function B(n){if(e.gameOver||e.currentRoll===null)return;let l=parseInt(n.dataset.player);if(l!==e.currentPlayer||n.classList.contains("filled"))return;let r=parseInt(n.dataset.index);e.players[l].digits[r]=e.currentRoll;let i=n.querySelector(".place-digit");i&&(i.textContent=String(e.currentRoll)),n.classList.add("filled"),g(l);let s=e.players[1].digits.filter(a=>a!==void 0).length===e.difficulty,m=e.players[2].digits.filter(a=>a!==void 0).length===e.difficulty;s&&m?w():e.mode==="2players"?o():e.currentPlayer===1?h():o()}function P(){if(e.gameOver)return;let n=Math.floor(Math.random()*6)+1;e.currentRoll=n,t.rollBtn.disabled=!0,d(e.currentPlayer,n),t.statusMsg.textContent=`Player ${e.currentPlayer}: Place the ${n}!`}function d(n,l){let r=n===1?t.p1Dice:t.p2Dice;r.querySelector(".dice-value").textContent=String(l)}function g(n){let l=e.players[n].digits,r=0;for(let s=0;s<l.length;s++)l[s]!==void 0&&(r+=l[s]*Math.pow(10,s));let i=n===1?t.p1Final:t.p2Final;i.textContent=String(r||"-")}function o(){e.currentRoll=null,e.currentPlayer=e.currentPlayer===1?2:1,e.currentPlayer===1?(t.player1Area.classList.add("active"),t.player2Area.classList.remove("active")):(t.player1Area.classList.remove("active"),t.player2Area.classList.add("active"));let n=e.currentPlayer===1?"Player 1":e.mode==="vsComputer"?"Computer":"Player 2";t.statusMsg.textContent=`${n}: Roll the dice!`,t.rollBtn.disabled=!1}async function h(){e.currentPlayer=2,e.currentRoll=null,t.player1Area.classList.remove("active"),t.player2Area.classList.add("active"),t.statusMsg.textContent="Computer is thinking...",t.rollBtn.disabled=!0,await c(800);let n=Math.floor(Math.random()*6)+1;e.currentRoll=n,d(2,n),t.statusMsg.textContent=`Computer rolled ${n}...`,await c(600);let l=[];for(let a=0;a<e.difficulty;a++)e.players[2].digits[a]===void 0&&l.push(a);let r;n>=5?r=Math.max(...l):n<=2?r=Math.min(...l):(l.sort((a,S)=>{let E=Math.abs(a-e.difficulty/2),C=Math.abs(S-e.difficulty/2);return E-C}),r=l[0]),e.players[2].digits[r]=n;let i=t.p2Grid.querySelector(`[data-index="${r}"]`);i.querySelector(".place-digit").textContent=n,i.classList.add("filled"),g(2),await c(500);let s=e.players[1].digits.filter(a=>a!==void 0).length===e.difficulty,m=e.players[2].digits.filter(a=>a!==void 0).length===e.difficulty;s&&m?w():o()}function c(n){return new Promise(l=>setTimeout(l,n))}function v(n){let l=e.players[n].digits,r=0;for(let i=0;i<l.length;i++)l[i]!==void 0&&(r+=l[i]*Math.pow(10,i));return r}function w(){e.gameOver=!0,t.rollBtn.disabled=!0;let n=v(1),l=v(2),r;n>l?(r=1,e.players[1].wins++):l>n?(r=2,e.players[2].wins++):r=0,t.p1Score.textContent=e.players[1].wins,t.p2Score.textContent=e.players[2].wins;let i=e.mode==="vsComputer"?"Computer":"Player 2";if(r===0)t.winnerTitle.textContent="\u{1F91D} It's a Tie!";else{let s=r===1?"Player 1":i;t.winnerTitle.textContent=`\u{1F389} ${s} Wins!`}t.winnerP1.innerHTML=`Player 1: <strong>${n}</strong>`,t.winnerP2.innerHTML=`${i}: <strong>${l}</strong>`,t.winnerModal.classList.add("show")}function u(){e.currentPlayer=1,e.currentRoll=null,e.gameOver=!1,e.players[1].digits=[],e.players[2].digits=[],t.player1Area.classList.add("active"),t.player2Area.classList.remove("active"),t.rollBtn.disabled=!1,t.statusMsg.textContent='Click "Roll Dice" to start!',t.winnerModal.classList.remove("show"),d(1,"?"),d(2,"?"),t.p1Final.textContent="-",t.p2Final.textContent="-",p()}t.difficultySelect.addEventListener("change",y),t.modeSelect.addEventListener("change",y),t.rollBtn.addEventListener("click",P),t.newGameBtn.addEventListener("click",u),t.playAgainBtn.addEventListener("click",u),p()})();})();
