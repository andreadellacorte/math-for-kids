(()=>{(function(){let e={difficulty:3,mode:"2players",currentPlayer:1,currentRoll:null,players:{1:{digits:[],wins:0},2:{digits:[],wins:0}},gameOver:!1},t={difficultySelect:document.getElementById("difficultySelect"),modeSelect:document.getElementById("modeSelect"),settingsPanel:document.getElementById("settingsPanel"),player1Area:document.getElementById("player1Area"),player2Area:document.getElementById("player2Area"),player2Name:document.getElementById("player2Name"),p1Dice:document.getElementById("p1Dice"),p2Dice:document.getElementById("p2Dice"),p1Grid:document.getElementById("p1Grid"),p2Grid:document.getElementById("p2Grid"),p1Final:document.getElementById("p1Final"),p2Final:document.getElementById("p2Final"),p1Score:document.getElementById("p1Score"),p2Score:document.getElementById("p2Score"),statusMsg:document.getElementById("statusMsg"),rollBtn:document.getElementById("rollBtn"),newGameBtn:document.getElementById("newGameBtn"),winnerModal:document.getElementById("winnerModal"),winnerTitle:document.getElementById("winnerTitle"),winnerP1:document.getElementById("winnerP1"),winnerP2:document.getElementById("winnerP2"),playAgainBtn:document.getElementById("playAgainBtn")};function m(){e.difficulty=parseInt(t.difficultySelect.value),e.mode=t.modeSelect.value,t.player2Name.textContent=e.mode==="vsComputer"?"Computer":"Player 2",p()}function y(){let n=["Ones","Tens","Hundreds","Thousands","Ten-Thousands"];t.p1Grid.innerHTML="",t.p2Grid.innerHTML="";for(let l=e.difficulty-1;l>=0;l--){let i=f(l,1),r=f(l,2);t.p1Grid.appendChild(i),t.p2Grid.appendChild(r)}}function f(n,l){let i=["Ones","Tens","Hundreds","Thousands","Ten-Thousands"],r=document.createElement("div");return r.className="place-slot",r.dataset.index=n,r.dataset.player=l,r.innerHTML=`
      <div class="place-label">${i[n]}</div>
      <div class="place-digit">-</div>
    `,r.addEventListener("click",()=>v(r)),r}function v(n){if(e.gameOver||e.currentRoll===null)return;let l=parseInt(n.dataset.player);if(l!==e.currentPlayer||n.classList.contains("filled"))return;let i=parseInt(n.dataset.index);e.players[l].digits[i]=e.currentRoll,n.querySelector(".place-digit").textContent=e.currentRoll,n.classList.add("filled"),g(l);let r=e.players[1].digits.filter(d=>d!==void 0).length===e.difficulty,a=e.players[2].digits.filter(d=>d!==void 0).length===e.difficulty;r&&a?B():e.mode==="2players"?c():e.currentPlayer===1?C():c()}function h(){if(e.gameOver)return;let n=Math.floor(Math.random()*6)+1;e.currentRoll=n,t.rollBtn.disabled=!0,o(e.currentPlayer,n),t.statusMsg.textContent=`Player ${e.currentPlayer}: Place the ${n}!`}function o(n,l){let i=n===1?t.p1Dice:t.p2Dice;i.querySelector(".dice-value").textContent=l}function g(n){let l=e.players[n].digits,i=0;for(let a=0;a<l.length;a++)l[a]!==void 0&&(i+=l[a]*Math.pow(10,a));let r=n===1?t.p1Final:t.p2Final;r.textContent=i||"-"}function c(){e.currentRoll=null,e.currentPlayer=e.currentPlayer===1?2:1,e.currentPlayer===1?(t.player1Area.classList.add("active"),t.player2Area.classList.remove("active")):(t.player1Area.classList.remove("active"),t.player2Area.classList.add("active"));let n=e.currentPlayer===1?"Player 1":e.mode==="vsComputer"?"Computer":"Player 2";t.statusMsg.textContent=`${n}: Roll the dice!`,t.rollBtn.disabled=!1}async function C(){e.currentPlayer=2,e.currentRoll=null,t.player1Area.classList.remove("active"),t.player2Area.classList.add("active"),t.statusMsg.textContent="Computer is thinking...",t.rollBtn.disabled=!0,await u(800);let n=Math.floor(Math.random()*6)+1;e.currentRoll=n,o(2,n),t.statusMsg.textContent=`Computer rolled ${n}...`,await u(600);let l=[];for(let s=0;s<e.difficulty;s++)e.players[2].digits[s]===void 0&&l.push(s);let i;n>=5?i=Math.max(...l):n<=2?i=Math.min(...l):(l.sort((s,E)=>{let P=Math.abs(s-e.difficulty/2),I=Math.abs(E-e.difficulty/2);return P-I}),i=l[0]),e.players[2].digits[i]=n;let r=t.p2Grid.querySelector(`[data-index="${i}"]`);r.querySelector(".place-digit").textContent=n,r.classList.add("filled"),g(2),await u(500);let a=e.players[1].digits.filter(s=>s!==void 0).length===e.difficulty,d=e.players[2].digits.filter(s=>s!==void 0).length===e.difficulty;a&&d?B():c()}function u(n){return new Promise(l=>setTimeout(l,n))}function w(n){let l=e.players[n].digits,i=0;for(let r=0;r<l.length;r++)l[r]!==void 0&&(i+=l[r]*Math.pow(10,r));return i}function B(){e.gameOver=!0,t.rollBtn.disabled=!0;let n=w(1),l=w(2),i;n>l?(i=1,e.players[1].wins++):l>n?(i=2,e.players[2].wins++):i=0,t.p1Score.textContent=e.players[1].wins,t.p2Score.textContent=e.players[2].wins;let r=e.mode==="vsComputer"?"Computer":"Player 2";if(i===0)t.winnerTitle.textContent="\u{1F91D} It's a Tie!";else{let a=i===1?"Player 1":r;t.winnerTitle.textContent=`\u{1F389} ${a} Wins!`}t.winnerP1.innerHTML=`Player 1: <strong>${n}</strong>`,t.winnerP2.innerHTML=`${r}: <strong>${l}</strong>`,t.winnerModal.classList.add("show")}function p(){e.currentPlayer=1,e.currentRoll=null,e.gameOver=!1,e.players[1].digits=[],e.players[2].digits=[],t.player1Area.classList.add("active"),t.player2Area.classList.remove("active"),t.rollBtn.disabled=!1,t.statusMsg.textContent='Click "Roll Dice" to start!',t.winnerModal.classList.remove("show"),o(1,"?"),o(2,"?"),t.p1Final.textContent="-",t.p2Final.textContent="-",y()}t.difficultySelect.addEventListener("change",m),t.modeSelect.addEventListener("change",m),t.rollBtn.addEventListener("click",h),t.newGameBtn.addEventListener("click",p),t.playAgainBtn.addEventListener("click",p),y()})();})();
