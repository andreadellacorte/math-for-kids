<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mixed Practice - Math Fun for Kids!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="back-btn">‚Üê Back Home</a>
            <h1>üé≤ Mixed Practice</h1>
        </div>

        <div class="score-board">
            <div class="score">Score: <span id="score">0</span></div>
            <div class="streak">Streak: <span id="streak">0</span></div>
            <div class="operation">Current: <span id="currentOp">-</span></div>
        </div>

        <div class="exercise-area">
            <div class="problem" id="problem">
                Click "New Problem" to start!
            </div>

            <div class="answer-section">
                <input type="number" id="answer" placeholder="Your answer" />
                <button onclick="checkAnswer()" class="btn">Check Answer</button>
            </div>

            <div class="controls">
                <button onclick="newProblem()" class="btn secondary">New Problem</button>
                <button onclick="showHint()" class="btn hint">Need a Hint?</button>
            </div>

            <div id="feedback" class="feedback"></div>
            <div id="hint" class="hint-text"></div>
        </div>

        <div class="settings">
            <label>Difficulty:
                <select id="difficulty" onchange="newProblem()">
                    <option value="easy">Easy (1-10)</option>
                    <option value="medium">Medium (1-25)</option>
                    <option value="hard">Hard (1-50)</option>
                </select>
            </label>
            <label>Operations:
                <div class="checkbox-group">
                    <label><input type="checkbox" id="additionEnabled" checked> Addition</label>
                    <label><input type="checkbox" id="subtractionEnabled" checked> Subtraction</label>
                    <label><input type="checkbox" id="multiplicationEnabled" checked> Multiplication</label>
                    <label><input type="checkbox" id="divisionEnabled" checked> Division</label>
                </div>
            </label>
        </div>
    </div>

    <script>
        let currentProblem = null;
        let score = 0;
        let streak = 0;

        function getRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function getEnabledOperations() {
            const operations = [];
            if (document.getElementById('additionEnabled').checked) operations.push('addition');
            if (document.getElementById('subtractionEnabled').checked) operations.push('subtraction');
            if (document.getElementById('multiplicationEnabled').checked) operations.push('multiplication');
            if (document.getElementById('divisionEnabled').checked) operations.push('division');
            return operations.length > 0 ? operations : ['addition'];
        }

        function newProblem() {
            const difficulty = document.getElementById('difficulty').value;
            const enabledOps = getEnabledOperations();
            const operation = enabledOps[Math.floor(Math.random() * enabledOps.length)];

            let maxNum;
            switch(difficulty) {
                case 'easy': maxNum = 10; break;
                case 'medium': maxNum = 25; break;
                case 'hard': maxNum = 50; break;
            }

            let num1, num2, answer, symbol, opName;

            switch(operation) {
                case 'addition':
                    num1 = getRandomNumber(1, maxNum);
                    num2 = getRandomNumber(1, maxNum);
                    answer = num1 + num2;
                    symbol = '+';
                    opName = 'Addition';
                    break;

                case 'subtraction':
                    num1 = getRandomNumber(1, maxNum);
                    num2 = getRandomNumber(1, maxNum);
                    if (num1 < num2) [num1, num2] = [num2, num1];
                    answer = num1 - num2;
                    symbol = '-';
                    opName = 'Subtraction';
                    break;

                case 'multiplication':
                    num1 = getRandomNumber(1, Math.min(12, maxNum / 2));
                    num2 = getRandomNumber(1, Math.min(12, maxNum / 2));
                    answer = num1 * num2;
                    symbol = '√ó';
                    opName = 'Multiplication';
                    break;

                case 'division':
                    num2 = getRandomNumber(2, Math.min(12, maxNum / 2));
                    answer = getRandomNumber(1, Math.min(12, maxNum / num2));
                    num1 = num2 * answer;
                    symbol = '√∑';
                    opName = 'Division';
                    break;
            }

            currentProblem = {
                num1: num1,
                num2: num2,
                answer: answer,
                operation: operation
            };

            document.getElementById('problem').innerHTML = `${num1} ${symbol} ${num2} = ?`;
            document.getElementById('currentOp').textContent = opName;
            document.getElementById('answer').value = '';
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('hint').innerHTML = '';
            document.getElementById('answer').focus();
        }

        function checkAnswer() {
            const userAnswer = parseInt(document.getElementById('answer').value);
            const feedback = document.getElementById('feedback');

            if (!currentProblem) {
                feedback.innerHTML = '<span class="incorrect">Please click "New Problem" first!</span>';
                return;
            }

            if (isNaN(userAnswer)) {
                feedback.innerHTML = '<span class="incorrect">Please enter a number!</span>';
                return;
            }

            if (userAnswer === currentProblem.answer) {
                score += 20;
                streak++;
                const encouragements = ['üéâ Excellent!', 'üåü Amazing!', 'üéä Fantastic!', '‚ú® Brilliant!', 'üèÜ Outstanding!'];
                const msg = encouragements[Math.floor(Math.random() * encouragements.length)];
                feedback.innerHTML = `<span class="correct">${msg}</span>`;
                setTimeout(newProblem, 1500);
            } else {
                streak = 0;
                feedback.innerHTML = `<span class="incorrect">Not quite! The answer is ${currentProblem.answer}. Try again!</span>`;
            }

            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
        }

        function showHint() {
            if (!currentProblem) return;

            const hint = document.getElementById('hint');
            const { num1, num2, operation } = currentProblem;

            let hintText = '';
            switch(operation) {
                case 'addition':
                    hintText = `üí° Hint: Start with ${num1} and count up ${num2} more!`;
                    break;
                case 'subtraction':
                    hintText = `üí° Hint: Start with ${num1} and take away ${num2}!`;
                    break;
                case 'multiplication':
                    hintText = `üí° Hint: Think of ${num1} groups of ${num2}!`;
                    break;
                case 'division':
                    hintText = `üí° Hint: How many groups of ${num2} fit into ${num1}?`;
                    break;
            }

            hint.innerHTML = hintText;
        }

        document.getElementById('answer').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        newProblem();
    </script>
</body>
</html>